### 模块加载机制

#### 一个文件中多次 require 同一个模块时，只会 require 一次

#### 内置模块加载机制

内置模块是 node.js 官方提供的模块，内置模块的加载优先级最高

例子：如果 node_modules 中存在 fs 模块，则 require('fs') 始终返回内置 fs 模块，并不会返回第三方模块

#### 自定义模块加载机制

使用 require 加载自定义模块时，必须在路径中显式使用 `./` 或 `../` 开头的路径标识符，如果没有路径标识符，node 会把它当作内置模块或第三方模块加载。

如果加载自定义模块时省略了文件扩展名，则 node 分别尝试按如下顺序加载文件：

- 确切文件名
- .js文件
- .json文件
- .node文件
- 加载失败

#### 第三方模块加载机制

如果传递给 require 的标识符不是内置模块，也没有以 `./` 或 `../` 开头，则 Node.js 会从当前文件的目录下寻找 node_modules 文件夹加载第三方模块。

没有找到则移动到上一层目录中继续寻找 node_modules，直到文件系统根目录。


#### 目录作为模块时加载方式

1. 在该目录中查找 package.json 文件，在其中找到 main 属性所指向的文件进行加载
2. 如果找不到 package.json 文件或没有配置 main 属性，则找到该目录中的 index.js 进行加载

